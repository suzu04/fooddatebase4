<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>ç›®æ¨™PFCè‡ªå‹•è¨ˆç®—</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: "Noto Sans JP", sans-serif;
            background: #f8fafc;
            margin: 0;
            padding: 20px;
        }

        h1 {
            text-align: center;
        }

        .box {
            max-width: 420px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, .08);
        }

        label {
            display: block;
            margin-top: 12px;
        }

        input,
        select,
        button {
            width: 100%;
            padding: 8px;
            margin-top: 6px;
            box-sizing: border-box;
        }

        button {
            margin-top: 16px;
            background: #2f855a;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        #out {
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th,
        td {
            border: 1px solid #ccc;
            padding: 6px;
            text-align: center;
        }
    </style>
</head>

<body>

    <h1>ç›®æ¨™PFCè‡ªå‹•è¨ˆç®—</h1>

    <div class="box">
        <label>
            ä½“é‡ï¼ˆkgï¼‰
            <input type="number" id="weight" placeholder="ä¾‹ï¼š60">
        </label>

        <label>
            ç›®çš„
            <select id="goal">
                <option value="loss">æ¸›é‡</option>
                <option value="maint">ç¶­æŒ</option>
                <option value="gain">å¢—é‡</option>
            </select>
        </label>

        <label>
            æ´»å‹•é‡
            <select id="activity">
                <option value="1.3">ä½ã„</option>
                <option value="1.5" selected>æ™®é€š</option>
                <option value="1.7">é«˜ã„</option>
            </select>
        </label>

        <button onclick="calc()">è¨ˆç®—ã™ã‚‹</button>

        <div id="out"></div>
    </div>

    <script>
        function calc() {
            const weight = Number(document.getElementById("weight").value)
            if (!weight || weight <= 0) {
                alert("ä½“é‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„")
                return
            }

            const goal = document.getElementById("goal").value
            const activity = Number(document.getElementById("activity").value)

            const bmr = 22 * weight
            const tdee = Math.round(bmr * activity)

            let kcal = tdee
            if (goal === "loss") kcal -= 500
            if (goal === "gain") kcal += 300

            let proteinPerKg = 1.8
            if (goal === "loss") proteinPerKg = 2.2
            if (goal === "gain") proteinPerKg = 2.0

            const p = Math.round(weight * proteinPerKg)
            const f = Math.round(weight * 0.8)
            const c = Math.max(0, Math.round((kcal - p * 4 - f * 9) / 4))

            // â˜… ä¿å­˜ï¼ˆæœ€é‡è¦ï¼‰
            localStorage.setItem("target_pfc", JSON.stringify({
                kcal: kcal,
                p: p,
                f: f,
                c: c
            }))

            document.getElementById("out").innerHTML = `
    <p><strong>ç›®æ¨™ã‚«ãƒ­ãƒªãƒ¼ï¼š</strong>${kcal} kcal</p>
    <table>
      <tr><th>æ „é¤Šç´ </th><th>g</th><th>kcal</th></tr>
      <tr><td>ãŸã‚“ã±ãè³ª</td><td>${p}</td><td>${p * 4}</td></tr>
      <tr><td>è„‚è³ª</td><td>${f}</td><td>${f * 9}</td></tr>
      <tr><td>ç‚­æ°´åŒ–ç‰©</td><td>${c}</td><td>${c * 4}</td></tr>
    </table>
    <p style="text-align:center;margin-top:12px">
      <a href="/diet">ğŸ“Š PFCç®¡ç†ãƒšãƒ¼ã‚¸ã¸</a>
    </p>
  `
        }
    </script>

</body>

</html>

</html>